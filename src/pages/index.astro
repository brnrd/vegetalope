---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { SITE_TITLE, SITE_DESCRIPTION, SITE_IMAGE } from '../consts';

const writeArticleModules = import.meta.glob('./write/*.md');
const writeArticles = (await Promise.all(
	Object.values(writeArticleModules).map((load) => load())
)).sort((a, b) => {
	const aDate = new Date(a.frontmatter.pubDate ?? 0);
	const bDate = new Date(b.frontmatter.pubDate ?? 0);
	return aDate.getTime() - bDate.getTime();
});
---

<!DOCTYPE html>
<html lang="en">
	<head>
		<BaseHead title="vegetalope" description={SITE_DESCRIPTION} image={SITE_IMAGE}/>
	</head>
	<body>
		<Header title={SITE_TITLE} />
		<main class="content stack site-index">
			<header class="stack">
				<h1 class="sr-only">{SITE_TITLE}</h1>
				<p>
					I write about software engineering, and build small tools for fun.
				</p>
			</header>
		
			<nav aria-label="Site navigation" class="stack nav-sections">
				<section class="stack nav-section" aria-labelledby="nav-write">
					<h2 id="nav-write">
						Write
						<a class="section-rss" href="/rss.xml">RSS</a>
					</h2>
					<ul class="card-list">
						{writeArticles.map((article) => (
							<li>
								<a href={article.url}>{article.frontmatter.title}</a>
								<p>{article.frontmatter.description}</p>
							</li>
						))}
					</ul>
				</section>

				<section class="stack nav-section" aria-labelledby="nav-build">
					<h2 id="nav-build">Build</h2>
					<ul class="card-list">
						<li>
							<a href="https://github.com/brnrd">GitHub</a>
							<p>It's all happening there</p>
						</li>
						<li>
							<a href="https://moments.vegetalope.com/">Moment Tracker</a>
							<p>A tiny app to track meaningful dates. Local-first, no account.</p>
						</li>
						<li>
							<a href="https://addons.mozilla.org/en-US/firefox/addon/prompttube/">PromptTube</a>
							<p>A tiny extension to copy to clipboard a prompt and the transcript of a YouTube video.</p>
						</li>
					</ul>
				</section>
			</nav>

		</main>
		<Footer />
	</body>
</html>
